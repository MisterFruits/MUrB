# CMake entry point
cmake_minimum_required (VERSION 2.6)

project (murb)

# Set the path to the CMake modules
set (CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/cmake/Modules/")

# Specify bin path
set (EXECUTABLE_OUTPUT_PATH bin/${CMAKE_BUILD_TYPE})

# Génération de la liste des fichiers sources
file (GLOB_RECURSE source_files src/common/* src/murb/*)

# Déclaration de l'exécutable
add_executable (murb ${source_files})

# MIPP wrapper includes
if (EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/lib/MIPP/src/mipp.h")
    add_definitions (-DMIPP_ENABLE_BACKTRACE)
    include_directories ("${CMAKE_CURRENT_SOURCE_DIR}/lib/MIPP/src/")
    message(STATUS "MIPP found")
else ()
    message(FATAL_ERROR "MIPP can't be found, try to init the submodules with the following cmd:\n"
                        "$ git submodule update --init -- ../lib/MIPP/")
endif ()

find_package (OpenGL REQUIRED)
if (OPENGL_FOUND)
    include_directories (${OPENGL_INCLUDE_DIR})
    target_link_libraries(murb ${OPENGL_LIBRARIES})
endif (OPENGL_FOUND)

find_package (GLEW REQUIRED)
if (GLEW_FOUND)
    include_directories (${GLEW_INCLUDE_DIRS})
    target_link_libraries (murb "${GLEW_LIBRARIES}")
endif (GLEW_FOUND)

find_package (GLM REQUIRED)
if (GLM_FOUND)
    include_directories (${GLM_INCLUDE_DIRS})
endif (GLM_FOUND)

find_package (GLFW REQUIRED)
if (GLFW_FOUND)
    include_directories (${GLFW_INCLUDE_DIR})
    target_link_libraries (murb "${GLFW_LIBRARIES}")
endif (GLFW_FOUND)

# Enable C++11
if(CMAKE_COMPILER_IS_GNUCXX)
    add_definitions(-std=c++11)
endif()

# Enable visualization
add_definitions(-DVISU)
